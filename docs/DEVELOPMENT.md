# Development

`create-react-app` was used to kickstart this repository. Since CRA approach was not built for chrome extensions, there are some sub-optimal outcomes.

## Details

1. Default webpack dev server (or `localhost:3000`) is not useful for most development because there is no way to use the `chrome.*` APIs. To access these APIs, the js files need to be served by Chrome as an unloaded extension, and not from a web server.

2. `npm run start`: this starts the webpack dev server, and forces it to save the bundled js file to the disk, so that Chrome can load it as an unpacked extension. Because the files on disk are updated, the Chrome extension is up-to-date and does not need to be manually reloaded from `chrome://extensions`. This changes are done by `config-overrides.js`.

3. The `public/background.js` is not covered by webpack config. During development, that means changes in background.js are not watched by the dev server, and the server **needs to be restarted manually**. This also means that background.js is not minified before shipping to production.

4. Another issue with `background.js` is that it needs to be manually updated with the correct locations for js/css assets that are generated by webpack. This is done by `scripts/helpers.js` at this point, but might be best delegated to something else.

5. React runs inside the injected content script, and is not able to connect to the dev server during `npm run start`. This means the github.com page needs to be manually reloaded for changes to be reflected.

6. For debugging using breakpoints, it is possible to do this via Chrome Developer Tools by selecting **Content scripts** tab in the **Sources** tab.

7. The [react-chrome-extension-boilerplate](https://github.com/jhen0409/react-chrome-extension-boilerplate) project implements hot-reloading in the injected content script by creating an iframe for the injected script, and maintains a socket connection to the dev server inside the iframe. This might not be a good idea for us since the extension needs to interact with the Github DOM.

8. `npm run build` creates a minified build, and this is used inside `npm run pack`, which packs the minified build into a crx file.
